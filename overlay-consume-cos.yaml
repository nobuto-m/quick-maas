series: jammy
applications:
  grafana-agent:
    charm: grafana-agent
    channel: latest/stable

saas:
  cos-alertmanager-karma-dashboard:
    url: cos.alertmanager-karma-dashboard
  cos-grafana-dashboards:
    url: cos.grafana-dashboards
  cos-loki-logging:
    url: cos.loki-logging
  cos-prometheus-receive-remote-write:
    url: cos.prometheus-receive-remote-write
  # LP: #2041500
  #cos-prometheus-scrape:
  #  url: cos.prometheus-scrape
  cos-prometheus-scrape-config-ceph:
    url: cos.prometheus-scrape-config-ceph

relations:
- - grafana-agent:logging-consumer
  - cos-loki-logging:logging
- - grafana-agent:send-remote-write
  - cos-prometheus-receive-remote-write:receive-remote-write
- - grafana-agent:grafana-dashboards-provider
  - cos-grafana-dashboards:grafana-dashboard

- - grafana-agent:juju-info
  - ceph-mon:juju-info

- - grafana-agent:juju-info
  - ceph-osd:juju-info
- - grafana-agent:juju-info
  - ceph-radosgw:juju-info
- - grafana-agent:juju-info
  - ceph-loadbalancer:juju-info
- - grafana-agent:juju-info
  - ceph-fs:juju-info
- - grafana-agent:juju-info
  - ceph-nfs:juju-info
# ceph-iscsi is co-located with ceph-osd
#- - grafana-agent:juju-info
#  - ceph-iscsi:juju-info
- - grafana-agent:juju-info
  - vault:juju-info

# LP: #2041500
#- - cos-prometheus-scrape:metrics-endpoint
#  - ceph-mon:metrics-endpoint
- - cos-prometheus-scrape-config-ceph:configurable-scrape-jobs
  - ceph-mon:metrics-endpoint
