series: jammy
applications:
  grafana-agent:
    charm: grafana-agent
    channel: latest/stable

saas:
  cos-alertmanager-karma-dashboard:
    url: cos.alertmanager-karma-dashboard
  cos-grafana-dashboards:
    url: cos.grafana-dashboards
  cos-loki-logging:
    url: cos.loki-logging
  cos-prometheus-receive-remote-write:
    url: cos.prometheus-receive-remote-write

relations:
- - microk8s:cos-agent
  - grafana-agent:cos-agent

- - grafana-agent:send-remote-write
  - cos-prometheus-receive-remote-write:receive-remote-write
- - grafana-agent:logging-consumer
  - cos-loki-logging:logging
# https://microk8s.io/docs/external-lma#prometheus-11
# https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack/templates/grafana/dashboards-1.14
- - grafana-agent:grafana-dashboards-provider
  - cos-grafana-dashboards:grafana-dashboard
